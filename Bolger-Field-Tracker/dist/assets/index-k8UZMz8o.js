var Ye=Object.defineProperty;var Ne=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>(Ne(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function O(){}function ve(e){return e()}function re(){return Object.create(null)}function P(e){e.forEach(ve)}function ne(e){return typeof e=="function"}function V(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Xe(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function X(e,t,n){e.insertBefore(t,n||null)}function Y(e){e.parentNode&&e.parentNode.removeChild(e)}function Oe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function I(e){return document.createTextNode(e)}function z(){return I(" ")}function Me(){return I("")}function N(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ie(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t){e.value=t??""}function be(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let x;function H(e){x=e}function Pe(){if(!x)throw new Error("Function called outside component initialization");return x}function De(e){Pe().$$.on_destroy.push(e)}const F=[],fe=[];let L=[];const ue=[],Ae=Promise.resolve();let ee=!1;function je(){ee||(ee=!0,Ae.then(ye))}function te(e){L.push(e)}const W=new Set;let A=0;function ye(){if(A!==0)return;const e=x;do{try{for(;A<F.length;){const t=F[A];A++,H(t),Fe(t.$$)}}catch(t){throw F.length=0,A=0,t}for(H(null),F.length=0,A=0;fe.length;)fe.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];W.has(n)||(W.add(n),n())}L.length=0}while(F.length);for(;ue.length;)ue.pop()();ee=!1,W.clear(),H(e)}function Fe(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function Le(e){const t=[],n=[];L.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),L=t}const J=new Set;let D;function Be(){D={r:0,c:[],p:D}}function He(){D.r||P(D.c),D=D.p}function B(e,t){e&&e.i&&(J.delete(e),e.i(t))}function U(e,t,n,i){if(e&&e.o){if(J.has(e))return;J.add(e),D.c.push(()=>{J.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function we(e){e&&e.c()}function oe(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),te(()=>{const l=e.$$.on_mount.map(ve).filter(ne);e.$$.on_destroy?e.$$.on_destroy.push(...l):P(l),e.$$.on_mount=[]}),o.forEach(te)}function ie(e,t){const n=e.$$;n.fragment!==null&&(Le(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,t){e.$$.dirty[0]===-1&&(F.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,n,i,o,l,s=null,r=[-1]){const a=x;H(e);const f=e.$$={fragment:null,ctx:[],props:l,update:O,not_equal:o,bound:re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:re(),dirty:r,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let h=!1;if(f.ctx=n?n(e,t.props||{},(_,v,...b)=>{const u=b.length?b[0]:v;return f.ctx&&o(f.ctx[_],f.ctx[_]=u)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](u),h&&Te(e,_)),v}):[],f.update(),h=!0,P(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){const _=Ie(t.target);f.fragment&&f.fragment.l(_),_.forEach(Y)}else f.fragment&&f.fragment.c();t.intro&&B(e.$$.fragment),oe(e,t.target,t.anchor),ye()}H(a)}class se{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){ie(this,1),this.$destroy=O}$on(t,n){if(!ne(n))return O;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!Xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xe);const j=[];function $e(e,t=O){let n;const i=new Set;function o(r){if(V(e,r)&&(e=r,n)){const a=!j.length;for(const f of i)f[1](),j.push(f,e);if(a){for(let f=0;f<j.length;f+=2)j[f][0](j[f+1]);j.length=0}}}function l(r){o(r(e))}function s(r,a=O){const f=[r,a];return i.add(f),i.size===1&&(n=t(o,l)||O),r(e),()=>{i.delete(f),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:s}}const ke="my-regions-data",Ge=[{id:"felix1",name:"Felix 1",points:"449,786 434,815 439,850 424,879 616,943 656,870 671,845 641,860 503,830",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"felix2",name:"Felix 2",points:"301,721 266,805 340,854 390,869 404,829 429,815 444,780 404,760 360,726",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"route1",name:"Route 1",points:"720,808 735,784 863,823 883,833 838,882",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"route2",name:"Route 2",points:"695,679 819,743 897,792 878,827 730,777 651,738",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"route3",name:"Route 3",points:"853,685 927,724 893,789 819,744 838,712",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"route3b",name:"Route 3B",points:"976,638 907,584 853,687 927,727",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"route4",name:"Route 4",points:"937,526 1016,555 976,634 907,580",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"hangat1",name:"Hangat 1",points:"883,967 1139,1061 1139,1115 878,982",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"hangat2",name:"Hangat 2",points:"1169,1014 888,955 883,965 1139,1058 1144,1034 1154,1024",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"hangat3",name:"Hangat 3",points:"888,954 907,924 1095,924 1238,949 1218,984 1198,1008 1169,1013",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"hangat4",name:"Hangat 4",points:"907,922 932,883 1124,853 1243,868 1248,883 1238,952 1095,922 986,922",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220},{id:"hangat5",name:"Hangat 5",points:"947,856 1001,831 1124,851 932,881",info:"Short info on hover",details:"Expanded details on click",tooltipX:260,tooltipY:220}];function Je(){const e=localStorage.getItem(ke);if(e)try{return JSON.parse(e)}catch(t){console.error("Failed to parse regions from local storage:",t)}return Ge}const Z=$e(Je());Z.subscribe(e=>{localStorage.setItem(ke,JSON.stringify(e))});function Ke(e){Z.update(t=>[...t,e])}function Ue(e){Z.update(t=>t.filter(n=>n.id!==e.id))}const Ve="/Bolger-Field-Tracker/assets/map-image-DxNZ7SkT.png";function Ze(e){let t,n,i=e[0].name+"",o,l,s,r=e[0].details+"",a,f,h,_,v,b,u;return{c(){t=S("div"),n=S("h3"),o=I(i),l=z(),s=S("p"),a=I(r),f=z(),h=S("button"),h.textContent="Close",_=z(),v=S("button"),v.textContent="Delete",be(v,"margin-left","10px"),d(t,"class","expanded-info svelte-1qa6lvf")},m(m,C){X(m,t,C),p(t,n),p(n,o),p(t,l),p(t,s),p(s,a),p(t,f),p(t,h),p(t,_),p(t,v),b||(u=[N(h,"click",function(){ne(e[1])&&e[1].apply(this,arguments)}),N(v,"click",e[3])],b=!0)},p(m,[C]){e=m,C&1&&i!==(i=e[0].name+"")&&K(o,i),C&1&&r!==(r=e[0].details+"")&&K(a,r)},i:O,o:O,d(m){m&&Y(t),b=!1,P(u)}}}function Qe(e,t,n){let{region:i=null}=t,{onClose:o=()=>{}}=t,{onDelete:l=()=>{}}=t;const s=()=>l(i);return e.$$set=r=>{"region"in r&&n(0,i=r.region),"onClose"in r&&n(1,o=r.onClose),"onDelete"in r&&n(2,l=r.onDelete)},[i,o,l,s]}class We extends se{constructor(t){super(),le(this,t,Qe,Ze,V,{region:0,onClose:1,onDelete:2})}}function ae(e,t,n){const i=e.slice();return i[21]=t[n],i}function de(e){let t,n,i;return{c(){t=S("button"),t.textContent="Create Region",d(t,"class","svelte-11t85qz")},m(o,l){X(o,t,l),n||(i=N(t,"click",e[9]),n=!0)},p:O,d(o){o&&Y(t),n=!1,i()}}}function pe(e){let t,n,i,o,l,s,r,a,f,h,_,v,b,u,m,C;return{c(){t=S("div"),n=S("h3"),n.textContent="Creating a new region",i=z(),o=S("label"),l=I(`Name:
        `),s=S("input"),r=z(),a=S("label"),f=I(`Info:
        `),h=S("input"),_=z(),v=S("button"),v.textContent="Save Region",b=z(),u=S("button"),u.textContent="Cancel",d(s,"placeholder","Region name"),d(o,"class","svelte-11t85qz"),d(h,"placeholder","Short info"),d(a,"class","svelte-11t85qz"),d(v,"class","svelte-11t85qz"),be(u,"margin-left","10px"),d(u,"class","svelte-11t85qz"),d(t,"class","create-region-panel svelte-11t85qz")},m(g,y){X(g,t,y),p(t,n),p(t,i),p(t,o),p(o,l),p(o,s),$(s,e[4]),p(t,r),p(t,a),p(a,f),p(a,h),$(h,e[5]),p(t,_),p(t,v),p(t,b),p(t,u),m||(C=[N(s,"input",e[15]),N(h,"input",e[16]),N(v,"click",e[11]),N(u,"click",e[12])],m=!0)},p(g,y){y&16&&s.value!==g[4]&&$(s,g[4]),y&32&&h.value!==g[5]&&$(h,g[5])},d(g){g&&Y(t),m=!1,P(C)}}}function he(e){let t,n,i,o,l=e[21].name+"",s,r,a,f,h;function _(){return e[17](e[21])}function v(...b){return e[19](e[21],...b)}return{c(){t=T("polygon"),o=T("text"),s=I(l),d(t,"points",n=e[21].points),d(t,"class",i="region "+(e[2]?"no-pointer":"")+" svelte-11t85qz"),d(o,"x",r=G(e[21].points).x),d(o,"y",a=G(e[21].points).y),d(o,"class","region-label svelte-11t85qz")},m(b,u){X(b,t,u),X(b,o,u),p(o,s),f||(h=[N(t,"mouseover",_),N(t,"mouseout",e[18]),N(t,"click",v)],f=!0)},p(b,u){e=b,u&64&&n!==(n=e[21].points)&&d(t,"points",n),u&4&&i!==(i="region "+(e[2]?"no-pointer":"")+" svelte-11t85qz")&&d(t,"class",i),u&64&&l!==(l=e[21].name+"")&&K(s,l),u&64&&r!==(r=G(e[21].points).x)&&d(o,"x",r),u&64&&a!==(a=G(e[21].points).y)&&d(o,"y",a)},d(b){b&&(Y(t),Y(o)),f=!1,P(h)}}}function me(e){let t,n;return{c(){t=T("polygon"),d(t,"points",n=e[3].join(" ")),d(t,"class","new-region-preview svelte-11t85qz")},m(i,o){X(i,t,o)},p(i,o){o&8&&n!==(n=i[3].join(" "))&&d(t,"points",n)},d(i){i&&Y(t)}}}function ge(e){let t,n=e[1].info+"",i;return{c(){t=S("div"),i=I(n),d(t,"class","hover-info svelte-11t85qz")},m(o,l){X(o,t,l),p(t,i)},p(o,l){l&2&&n!==(n=o[1].info+"")&&K(i,n)},d(o){o&&Y(t)}}}function _e(e){let t,n;return t=new We({props:{region:e[0],onClose:e[14],onDelete:e[13]}}),{c(){we(t.$$.fragment)},m(i,o){oe(t,i,o),n=!0},p(i,o){const l={};o&1&&(l.region=i[0]),t.$set(l)},i(i){n||(B(t.$$.fragment,i),n=!0)},o(i){U(t.$$.fragment,i),n=!1},d(i){ie(t,i)}}}function et(e){let t,n,i,o,l,s,r,a,f,h,_,v,b,u=!e[2]&&de(e),m=e[2]&&pe(e),C=ce(e[6]),g=[];for(let c=0;c<C.length;c+=1)g[c]=he(ae(e,C,c));let y=e[2]&&e[3].length>=2&&me(e),R=e[1]&&ge(e),w=e[0]&&_e(e);return{c(){t=S("div"),u&&u.c(),n=z(),m&&m.c(),i=z(),o=S("div"),l=T("svg"),s=T("image");for(let c=0;c<g.length;c+=1)g[c].c();r=Me(),y&&y.c(),a=z(),R&&R.c(),f=z(),w&&w.c(),d(t,"class","top-panel svelte-11t85qz"),d(s,"href",Ve),d(s,"x","0"),d(s,"y","0"),d(s,"width","2648"),d(s,"height","1582"),d(l,"class","map-svg svelte-11t85qz"),d(l,"viewBox","0 0 2648 1582"),d(l,"preserveAspectRatio","xMidYMid meet"),d(o,"class",h="map-container "+(e[2]?"create-mode":"")+" svelte-11t85qz")},m(c,q){X(c,t,q),u&&u.m(t,null),p(t,n),m&&m.m(t,null),X(c,i,q),X(c,o,q),p(o,l),p(l,s);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(l,null);p(l,r),y&&y.m(l,null),p(o,a),R&&R.m(o,null),p(o,f),w&&w.m(o,null),_=!0,v||(b=N(l,"click",e[10]),v=!0)},p(c,[q]){if(c[2]?u&&(u.d(1),u=null):u?u.p(c,q):(u=de(c),u.c(),u.m(t,n)),c[2]?m?m.p(c,q):(m=pe(c),m.c(),m.m(t,null)):m&&(m.d(1),m=null),q&454){C=ce(c[6]);let E;for(E=0;E<C.length;E+=1){const k=ae(c,C,E);g[E]?g[E].p(k,q):(g[E]=he(k),g[E].c(),g[E].m(l,r))}for(;E<g.length;E+=1)g[E].d(1);g.length=C.length}c[2]&&c[3].length>=2?y?y.p(c,q):(y=me(c),y.c(),y.m(l,null)):y&&(y.d(1),y=null),c[1]?R?R.p(c,q):(R=ge(c),R.c(),R.m(o,f)):R&&(R.d(1),R=null),c[0]?w?(w.p(c,q),q&1&&B(w,1)):(w=_e(c),w.c(),B(w,1),w.m(o,null)):w&&(Be(),U(w,1,1,()=>{w=null}),He()),(!_||q&4&&h!==(h="map-container "+(c[2]?"create-mode":"")+" svelte-11t85qz"))&&d(o,"class",h)},i(c){_||(B(w),_=!0)},o(c){U(w),_=!1},d(c){c&&(Y(t),Y(i),Y(o)),u&&u.d(),m&&m.d(),Oe(g,c),y&&y.d(),R&&R.d(),w&&w.d(),v=!1,b()}}}function G(e){const t=e.trim().split(" ").map(l=>l.split(",").map(Number));let n=0,i=0,o=0;for(let l=0;l<t.length;l++){const[s,r]=t[l],[a,f]=t[(l+1)%t.length],h=s*f-a*r;n+=h,i+=(s+a)*h,o+=(r+f)*h}return n/=2,i/=6*n,o/=6*n,{x:i,y:o}}function tt(e,t,n){let i=null,o=null,l=!1,s=[],r="",a="",f=[];const h=Z.subscribe(k=>{n(6,f=k)});De(()=>{h()});function _(k){n(1,o=k)}function v(k,M){l||(M.stopPropagation(),n(0,i=k))}function b(){n(2,l=!0),n(3,s=[]),n(4,r=""),n(5,a=""),n(0,i=null)}function u(k){if(!l)return;const M=k.currentTarget.getBoundingClientRect(),Se=2648/M.width,Ee=1582/M.height,Ce=k.clientX-M.left,Re=k.clientY-M.top,qe=Math.round(Ce*Se),ze=Math.round(Re*Ee);n(3,s=[...s,`${qe},${ze}`])}function m(){if(!r.trim()||s.length<3){alert("Please provide a region name and at least 3 points.");return}const k={id:"new_"+Date.now(),name:r.trim(),points:s.join(" "),info:a.trim()||"Short info on hover",details:"Expanded details on click"};Ke(k),n(2,l=!1),n(3,s=[]),n(4,r=""),n(5,a="")}function C(){n(2,l=!1),n(3,s=[]),n(4,r=""),n(5,a="")}function g(k){Ue(k),n(0,i=null)}function y(){n(0,i=null)}function R(){r=this.value,n(4,r)}function w(){a=this.value,n(5,a)}return[i,o,l,s,r,a,f,_,v,b,u,m,C,g,y,R,w,k=>_(k),()=>n(1,o=null),(k,M)=>v(k,M)]}let nt=class extends se{constructor(t){super(),le(this,t,tt,et,V,{})}};function ot(e){let t,n,i,o,l;return o=new nt({}),{c(){t=S("main"),n=S("h1"),n.textContent="Haras de la Gesse Field Mapping",i=z(),we(o.$$.fragment),d(n,"class","svelte-19w2whe"),d(t,"class","svelte-19w2whe")},m(s,r){X(s,t,r),p(t,n),p(t,i),oe(o,t,null),l=!0},p:O,i(s){l||(B(o.$$.fragment,s),l=!0)},o(s){U(o.$$.fragment,s),l=!1},d(s){s&&Y(t),ie(o)}}}function it(e,t,n){let{name:i}=t;return e.$$set=o=>{"name"in o&&n(0,i=o.name)},[i]}class lt extends se{constructor(t){super(),le(this,t,it,ot,V,{name:0})}}new lt({target:document.getElementById("app")});
