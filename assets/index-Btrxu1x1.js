var Ne=Object.defineProperty;var Oe=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>(Oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function I(){}function be(e){return e()}function re(){return Object.create(null)}function A(e){e.forEach(be)}function ne(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Me(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function Ie(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function $(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function D(e){return document.createTextNode(e)}function R(){return D(" ")}function Pe(){return D("")}function O(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function De(e){return Array.from(e.childNodes)}function U(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t){e.value=t??""}function ve(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let G;function X(e){G=e}function Ae(){if(!G)throw new Error("Function called outside component initialization");return G}function je(e){Ae().$$.on_destroy.push(e)}const B=[],fe=[];let Y=[];const ue=[],Fe=Promise.resolve();let ee=!1;function Le(){ee||(ee=!0,Fe.then(ye))}function te(e){Y.push(e)}const x=new Set;let F=0;function ye(){if(F!==0)return;const e=G;do{try{for(;F<B.length;){const t=B[F];F++,X(t),Be(t.$$)}}catch(t){throw B.length=0,F=0,t}for(X(null),B.length=0,F=0;fe.length;)fe.pop()();for(let t=0;t<Y.length;t+=1){const n=Y[t];x.has(n)||(x.add(n),n())}Y.length=0}while(B.length);for(;ue.length;)ue.pop()();ee=!1,x.clear(),X(e)}function Be(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function Ye(e){const t=[],n=[];Y.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Y=t}const K=new Set;let j;function Te(){j={r:0,c:[],p:j}}function Xe(){j.r||A(j.c),j=j.p}function T(e,t){e&&e.i&&(K.delete(e),e.i(t))}function V(e,t,n,l){if(e&&e.o){if(K.has(e))return;K.add(e),j.c.push(()=>{K.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function we(e){e&&e.c()}function oe(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),te(()=>{const i=e.$$.on_mount.map(be).filter(ne);e.$$.on_destroy?e.$$.on_destroy.push(...i):A(i),e.$$.on_mount=[]}),o.forEach(te)}function le(e,t){const n=e.$$;n.fragment!==null&&(Ye(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(B.push(e),Le(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ie(e,t,n,l,o,i,s=null,r=[-1]){const a=G;X(e);const f=e.$$={fragment:null,ctx:[],props:i,update:I,not_equal:o,bound:re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:re(),dirty:r,skip_bound:!1,root:t.target||a.$$.root};s&&s(f.root);let m=!1;if(f.ctx=n?n(e,t.props||{},(_,b,...v)=>{const u=v.length?v[0]:b;return f.ctx&&o(f.ctx[_],f.ctx[_]=u)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](u),m&&$e(e,_)),b}):[],f.update(),m=!0,A(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const _=De(t.target);f.fragment&&f.fragment.l(_),_.forEach(N)}else f.fragment&&f.fragment.c();t.intro&&T(e.$$.fragment),oe(e,t.target,t.anchor),ye()}X(a)}class se{constructor(){W(this,"$$");W(this,"$$set")}$destroy(){le(this,1),this.$destroy=I}$on(t,n){if(!ne(n))return I;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Me(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ge="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ge);const L=[];function He(e,t=I){let n;const l=new Set;function o(r){if(Z(e,r)&&(e=r,n)){const a=!L.length;for(const f of l)f[1](),L.push(f,e);if(a){for(let f=0;f<L.length;f+=2)L[f][0](L[f+1]);L.length=0}}}function i(r){o(r(e))}function s(r,a=I){const f=[r,a];return l.add(f),l.size===1&&(n=t(o,i)||I),r(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:s}}const Ce="my-regions-data",Je=[{id:"felix1",name:"Felix 1",points:"449,786 434,815 439,850 424,879 616,943 656,870 671,845 641,860 503,830",info:"Short info on hover",details:"Expanded details on click"},{id:"felix2",name:"Felix 2",points:"301,721 266,805 340,854 390,869 404,829 429,815 444,780 404,760 360,726",info:"Short info on hover",details:"Expanded details on click"},{id:"route1",name:"Route 1",points:"720,808 735,784 863,823 883,833 838,882",info:"Short info on hover",details:"Expanded details on click"}];function Ke(){const e=localStorage.getItem(Ce);if(e)try{return JSON.parse(e)}catch(t){console.error("Failed to parse regions from local storage:",t)}return Je}const Q=He(Ke());Q.subscribe(e=>{localStorage.setItem(Ce,JSON.stringify(e))});function Ue(e){Q.update(t=>[...t,e])}function Ve(e){Q.update(t=>t.filter(n=>n.id!==e.id))}const Ze="/Bolger-Field-Tracker/assets/map-image-DxNZ7SkT.png";function Qe(e){let t,n,l=e[0].name+"",o,i,s,r=e[0].details+"",a,f,m,_,b,v,u;return{c(){t=k("div"),n=k("h3"),o=D(l),i=R(),s=k("p"),a=D(r),f=R(),m=k("button"),m.textContent="Close",_=R(),b=k("button"),b.textContent="Delete",ve(b,"margin-left","10px"),d(t,"class","expanded-info svelte-1qa6lvf")},m(h,E){M(h,t,E),p(t,n),p(n,o),p(t,i),p(t,s),p(s,a),p(t,f),p(t,m),p(t,_),p(t,b),v||(u=[O(m,"click",function(){ne(e[1])&&e[1].apply(this,arguments)}),O(b,"click",e[3])],v=!0)},p(h,[E]){e=h,E&1&&l!==(l=e[0].name+"")&&U(o,l),E&1&&r!==(r=e[0].details+"")&&U(a,r)},i:I,o:I,d(h){h&&N(t),v=!1,A(u)}}}function We(e,t,n){let{region:l=null}=t,{onClose:o=()=>{}}=t,{onDelete:i=()=>{}}=t;const s=()=>i(l);return e.$$set=r=>{"region"in r&&n(0,l=r.region),"onClose"in r&&n(1,o=r.onClose),"onDelete"in r&&n(2,i=r.onDelete)},[l,o,i,s]}class xe extends se{constructor(t){super(),ie(this,t,We,Qe,Z,{region:0,onClose:1,onDelete:2})}}function ae(e,t,n){const l=e.slice();return l[21]=t[n],l}function de(e){let t,n,l;return{c(){t=k("button"),t.textContent="Create Region",d(t,"class","svelte-11t85qz")},m(o,i){M(o,t,i),n||(l=O(t,"click",e[9]),n=!0)},p:I,d(o){o&&N(t),n=!1,l()}}}function pe(e){let t,n,l,o,i,s,r,a,f,m,_,b,v,u,h,E;return{c(){t=k("div"),n=k("h3"),n.textContent="Creating a new region",l=R(),o=k("label"),i=D(`Name:
        `),s=k("input"),r=R(),a=k("label"),f=D(`Info:
        `),m=k("input"),_=R(),b=k("button"),b.textContent="Save Region",v=R(),u=k("button"),u.textContent="Cancel",d(s,"placeholder","Region name"),d(o,"class","svelte-11t85qz"),d(m,"placeholder","Short info"),d(a,"class","svelte-11t85qz"),d(b,"class","svelte-11t85qz"),ve(u,"margin-left","10px"),d(u,"class","svelte-11t85qz"),d(t,"class","create-region-panel svelte-11t85qz")},m(g,y){M(g,t,y),p(t,n),p(t,l),p(t,o),p(o,i),p(o,s),H(s,e[4]),p(t,r),p(t,a),p(a,f),p(a,m),H(m,e[5]),p(t,_),p(t,b),p(t,v),p(t,u),h||(E=[O(s,"input",e[15]),O(m,"input",e[16]),O(b,"click",e[11]),O(u,"click",e[12])],h=!0)},p(g,y){y&16&&s.value!==g[4]&&H(s,g[4]),y&32&&m.value!==g[5]&&H(m,g[5])},d(g){g&&N(t),h=!1,A(E)}}}function me(e){let t,n,l,o,i=e[21].name+"",s,r,a,f,m;function _(){return e[17](e[21])}function b(...v){return e[19](e[21],...v)}return{c(){t=$("polygon"),o=$("text"),s=D(i),d(t,"points",n=e[21].points),d(t,"class",l="region "+(e[2]?"no-pointer":"")+" svelte-11t85qz"),d(o,"x",r=J(e[21].points).x),d(o,"y",a=J(e[21].points).y),d(o,"class","region-label svelte-11t85qz")},m(v,u){M(v,t,u),M(v,o,u),p(o,s),f||(m=[O(t,"mouseover",_),O(t,"mouseout",e[18]),O(t,"click",b)],f=!0)},p(v,u){e=v,u&64&&n!==(n=e[21].points)&&d(t,"points",n),u&4&&l!==(l="region "+(e[2]?"no-pointer":"")+" svelte-11t85qz")&&d(t,"class",l),u&64&&i!==(i=e[21].name+"")&&U(s,i),u&64&&r!==(r=J(e[21].points).x)&&d(o,"x",r),u&64&&a!==(a=J(e[21].points).y)&&d(o,"y",a)},d(v){v&&(N(t),N(o)),f=!1,A(m)}}}function he(e){let t,n;return{c(){t=$("polygon"),d(t,"points",n=e[3].join(" ")),d(t,"class","new-region-preview svelte-11t85qz")},m(l,o){M(l,t,o)},p(l,o){o&8&&n!==(n=l[3].join(" "))&&d(t,"points",n)},d(l){l&&N(t)}}}function ge(e){let t,n=e[1].info+"",l;return{c(){t=k("div"),l=D(n),d(t,"class","hover-info svelte-11t85qz")},m(o,i){M(o,t,i),p(t,l)},p(o,i){i&2&&n!==(n=o[1].info+"")&&U(l,n)},d(o){o&&N(t)}}}function _e(e){let t,n;return t=new xe({props:{region:e[0],onClose:e[14],onDelete:e[13]}}),{c(){we(t.$$.fragment)},m(l,o){oe(t,l,o),n=!0},p(l,o){const i={};o&1&&(i.region=l[0]),t.$set(i)},i(l){n||(T(t.$$.fragment,l),n=!0)},o(l){V(t.$$.fragment,l),n=!1},d(l){le(t,l)}}}function et(e){let t,n,l,o,i,s,r,a,f,m,_,b,v,u=!e[2]&&de(e),h=e[2]&&pe(e),E=ce(e[6]),g=[];for(let c=0;c<E.length;c+=1)g[c]=me(ae(e,E,c));let y=e[2]&&e[3].length>=2&&he(e),q=e[1]&&ge(e),w=e[0]&&_e(e);return{c(){t=k("div"),u&&u.c(),n=R(),h&&h.c(),l=R(),o=k("div"),i=$("svg"),s=$("image");for(let c=0;c<g.length;c+=1)g[c].c();r=Pe(),y&&y.c(),a=R(),q&&q.c(),f=R(),w&&w.c(),d(t,"class","top-panel svelte-11t85qz"),d(s,"href",Ze),d(s,"x","0"),d(s,"y","0"),d(s,"width","2648"),d(s,"height","1582"),d(i,"class","map-svg svelte-11t85qz"),d(i,"viewBox","0 0 2648 1582"),d(i,"preserveAspectRatio","xMidYMid meet"),d(o,"class",m="map-container "+(e[2]?"create-mode":"")+" svelte-11t85qz")},m(c,z){M(c,t,z),u&&u.m(t,null),p(t,n),h&&h.m(t,null),M(c,l,z),M(c,o,z),p(o,i),p(i,s);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(i,null);p(i,r),y&&y.m(i,null),p(o,a),q&&q.m(o,null),p(o,f),w&&w.m(o,null),_=!0,b||(v=O(i,"click",e[10]),b=!0)},p(c,[z]){if(c[2]?u&&(u.d(1),u=null):u?u.p(c,z):(u=de(c),u.c(),u.m(t,n)),c[2]?h?h.p(c,z):(h=pe(c),h.c(),h.m(t,null)):h&&(h.d(1),h=null),z&454){E=ce(c[6]);let S;for(S=0;S<E.length;S+=1){const C=ae(c,E,S);g[S]?g[S].p(C,z):(g[S]=me(C),g[S].c(),g[S].m(i,r))}for(;S<g.length;S+=1)g[S].d(1);g.length=E.length}c[2]&&c[3].length>=2?y?y.p(c,z):(y=he(c),y.c(),y.m(i,null)):y&&(y.d(1),y=null),c[1]?q?q.p(c,z):(q=ge(c),q.c(),q.m(o,f)):q&&(q.d(1),q=null),c[0]?w?(w.p(c,z),z&1&&T(w,1)):(w=_e(c),w.c(),T(w,1),w.m(o,null)):w&&(Te(),V(w,1,1,()=>{w=null}),Xe()),(!_||z&4&&m!==(m="map-container "+(c[2]?"create-mode":"")+" svelte-11t85qz"))&&d(o,"class",m)},i(c){_||(T(w),_=!0)},o(c){V(w),_=!1},d(c){c&&(N(t),N(l),N(o)),u&&u.d(),h&&h.d(),Ie(g,c),y&&y.d(),q&&q.d(),w&&w.d(),b=!1,v()}}}function J(e){const t=e.trim().split(" ").map(i=>i.split(",").map(Number));let n=0,l=0,o=0;for(let i=0;i<t.length;i++){const[s,r]=t[i],[a,f]=t[(i+1)%t.length],m=s*f-a*r;n+=m,l+=(s+a)*m,o+=(r+f)*m}return n/=2,l/=6*n,o/=6*n,{x:l,y:o}}function tt(e,t,n){let l=null,o=null,i=!1,s=[],r="",a="",f=[];const m=Q.subscribe(C=>{n(6,f=C)});je(()=>{m()});function _(C){n(1,o=C)}function b(C,P){i||(P.stopPropagation(),n(0,l=C))}function v(){n(2,i=!0),n(3,s=[]),n(4,r=""),n(5,a=""),n(0,l=null)}function u(C){if(!i)return;const P=C.currentTarget.getBoundingClientRect(),ke=2648/P.width,Se=1582/P.height,Ee=C.clientX-P.left,qe=C.clientY-P.top,ze=Math.round(Ee*ke),Re=Math.round(qe*Se);n(3,s=[...s,`${ze},${Re}`])}function h(){if(!r.trim()||s.length<3){alert("Please provide a region name and at least 3 points.");return}const C={id:"new_"+Date.now(),name:r.trim(),points:s.join(" "),info:a.trim()||"Short info on hover",details:"Expanded details on click"};Ue(C),n(2,i=!1),n(3,s=[]),n(4,r=""),n(5,a="")}function E(){n(2,i=!1),n(3,s=[]),n(4,r=""),n(5,a="")}function g(C){Ve(C),n(0,l=null)}function y(){n(0,l=null)}function q(){r=this.value,n(4,r)}function w(){a=this.value,n(5,a)}return[l,o,i,s,r,a,f,_,b,v,u,h,E,g,y,q,w,C=>_(C),()=>n(1,o=null),(C,P)=>b(C,P)]}let nt=class extends se{constructor(t){super(),ie(this,t,tt,et,Z,{})}};function ot(e){let t,n,l,o,i;return o=new nt({}),{c(){t=k("main"),n=k("h1"),n.textContent="Haras de la Gesse Field Mapping",l=R(),we(o.$$.fragment),d(n,"class","svelte-19w2whe"),d(t,"class","svelte-19w2whe")},m(s,r){M(s,t,r),p(t,n),p(t,l),oe(o,t,null),i=!0},p:I,i(s){i||(T(o.$$.fragment,s),i=!0)},o(s){V(o.$$.fragment,s),i=!1},d(s){s&&N(t),le(o)}}}function lt(e,t,n){let{name:l}=t;return e.$$set=o=>{"name"in o&&n(0,l=o.name)},[l]}class it extends se{constructor(t){super(),ie(this,t,lt,ot,Z,{name:0})}}new it({target:document.getElementById("app")});
